---
/**
 * MDX-compatible wrapper for TagBadge component demos
 */
import { TagBadge } from 'starlight-tags/components';
import { initTags, getTag } from 'virtual:starlight-tagging/tags';

interface Props {
  /** Tag ID to display */
  tagId: string;
  /** Badge size */
  size?: 'small' | 'medium' | 'large';
  /** Visual style */
  variant?: 'solid' | 'outline' | 'ghost';
  /** Show page count */
  showCount?: boolean;
  /** Show tag icon */
  showIcon?: boolean;
  /** Render as link */
  clickable?: boolean;
}

const {
  tagId,
  size = 'medium',
  variant = 'solid',
  showCount = false,
  showIcon = true,
  clickable = true
} = Astro.props;

// Initialize tags store (memoized - only runs once across all components)
await initTags();

const tag = getTag(tagId);
---

{tag ? (
  <TagBadge
    tag={tag}
    size={size}
    variant={variant}
    showCount={showCount}
    showIcon={showIcon}
    clickable={clickable}
  />
) : (
  <span class="error-message">
    Tag "{tagId}" not found
  </span>
)}

<style>
  .error-message {
    padding: 0.25rem 0.5rem;
    background: color-mix(in srgb, #ef4444 15%, transparent);
    border: 1px solid #ef4444;
    border-radius: var(--sl-border-radius);
    color: #ef4444;
    font-size: var(--sl-text-sm);
  }
</style>
