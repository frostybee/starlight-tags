---
title: Extended Schema Demo
description: Live demo showing how to extend the tag schema with custom fields
tags:
  - plugins
  - advanced
---

import DifficultyTagBadge from '../../../components/DifficultyTagBadge.astro';
import FilterableByDifficulty from '../../../components/FilterableByDifficulty.astro';
import ProductTagBadge from '../../../components/ProductTagBadge.astro';
import FilterableTagsList from '../../../components/FilterableTagsList.astro';

This page demonstrates how to extend the base tag schema with **multiple custom field sets**. You can combine educational fields (difficulty, prerequisites) with product fields (planTier) in a single schema.

---

## Educational Filtering (Difficulty Levels)

Filter tags by difficulty level. Great for learning paths and tutorials:

<FilterableByDifficulty />

### Difficulty Badges

<div style="display: flex; gap: 0.75rem; flex-wrap: wrap; align-items: center;">
  <DifficultyTagBadge tagId="js-basics" />
  <DifficultyTagBadge tagId="js-arrays" />
  <DifficultyTagBadge tagId="js-async" />
</div>

### With Prerequisites

<div style="display: flex; gap: 1rem; flex-wrap: wrap; align-items: flex-start;">
  <DifficultyTagBadge tagId="js-async" showPrerequisites />
</div>

---

## Product Filtering (Plan Tiers)

Filter tags by pricing tier. Perfect for SaaS documentation:

<FilterableTagsList />

### Plan Tier Badges

<div style="display: flex; gap: 0.75rem; flex-wrap: wrap; align-items: center;">
  <ProductTagBadge tagId="components" />
  <ProductTagBadge tagId="theming" />
  <ProductTagBadge tagId="i18n" />
</div>

---

## Combined Schema

Both field sets can coexist in a single schema:

```typescript
// src/config/extended-tag-schema.ts
import { z } from 'astro/zod';
import { tagDefinitionSchema } from 'starlight-tags/schemas/tags';

export const extendedTagSchema = tagDefinitionSchema.extend({
  // Educational fields
  difficulty: z.enum(['beginner', 'intermediate', 'advanced']).optional(),
  contentType: z.enum(['lecture', 'lab', 'tutorial', 'reference']).optional(),
  prerequisites: z.array(z.string()).optional(),

  // Product fields
  product: z.string().optional(),
  planTier: z.enum(['free', 'pro', 'enterprise']).optional(),
});
```

### Example tags.yml

Tags can have educational fields, product fields, or both:

```yaml
tags:
  # Educational only
  js-basics:
    label: "JS Basics"
    difficulty: beginner
    contentType: lecture

  # Product only
  components:
    label: "Components"
    planTier: free

  # Both fields!
  advanced-api:
    label: "Advanced API"
    difficulty: advanced
    planTier: enterprise
    prerequisites: ["js-basics"]
```

---

## Implementation Details

### Educational Component

```astro
---
// DifficultyTagBadge.astro
import { initTags, getTag } from 'virtual:starlight-tagging/tags';
import type { ProcessedTag } from 'starlight-tags/schemas/tags';
import type { ExtendedTag } from '../config/extended-tag-schema';

const { tagId } = Astro.props;

await initTags();
const tag = getTag(tagId) as ProcessedTag & ExtendedTag;

const difficultyColors = {
  beginner: '#22c55e',
  intermediate: '#f59e0b',
  advanced: '#ef4444'
};
---

<span class="tag">
  {tag.label}
  {tag.difficulty && (
    <span style={`background: ${difficultyColors[tag.difficulty]}`}>
      {tag.difficulty}
    </span>
  )}
</span>
```

### Product Component

```astro
---
// ProductTagBadge.astro
import { initTags, getTag } from 'virtual:starlight-tagging/tags';
import type { ProcessedTag } from 'starlight-tags/schemas/tags';
import type { ExtendedTag } from '../config/extended-tag-schema';

const { tagId } = Astro.props;

await initTags();
const tag = getTag(tagId) as ProcessedTag & ExtendedTag;

const tierColors = {
  free: '#22c55e',
  pro: '#3b82f6',
  enterprise: '#8b5cf6'
};
---

<span class="tag">
  {tag.label}
  {tag.planTier && (
    <span style={`background: ${tierColors[tag.planTier]}`}>
      {tag.planTier}
    </span>
  )}
</span>
```

### Filtering by Custom Fields

```typescript
// Filter by difficulty
const beginnerTags = allTags.filter(tag => tag.difficulty === 'beginner');

// Filter by plan tier
const freeTags = allTags.filter(tag => tag.planTier === 'free');

// Filter by both (e.g., beginner + free)
const accessibleTags = allTags.filter(
  tag => tag.difficulty === 'beginner' && tag.planTier === 'free'
);
```

---

## Live Examples

Check out the [JavaScript Learning Path](/starlight-tags/educational/) to see educational tags in action with a complete tutorial series.
